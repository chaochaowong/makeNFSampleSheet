path <- file.path('///Volumn/Active',
'sarthy_j/FASTQs',
'GBe6_M07e_WSU_frz_CnT_06213024',
'usftp21.novogene.com/01.RawData')
file.exists(path)
path <- file.path('///Volumes/Active',
'sarthy_j/FASTQs',
'GBe6_M07e_WSU_frz_CnT_06213024',
'usftp21.novogene.com/01.RawData')
file.exists(path)
dir_header <- '///Volumes'
path <- file.path(dir_header, 'Archive',
'sarthy_j/FASTQs',
'GBe6_M07e_WSU_frz_CnT_06213024',
'usftp21.novogene.com/01.RawData')
file.exists(path)
dir_header <- '///Volumes'
path <- file.path(dir_header, 'Archive',
'sarthy_j/FASTQs',
'GBe6_M07e_WSU_frz_CnT_06213024',
'usftp21.novogene.com/01.RawData')
file.exists(path)
sample_sheet <- file.path('/Users/cwo11/Projects/makeNFSampleSheet/inst/extdata',
'JFSe8_Free_CnR_Template.xlsx')
master_sheet <- file.path('/Users/cwo11/Projects/makeNFSampleSheet/inst/extdata',
'JFSe8_Free_CnR_Template.xlsx')
sheet = 1
tidy_sample_sheet <- function(master_sheet,
sheet = 1,
unique_id,
sample_id = NULL,
sample = NULL,
single_end = FALSE,
antibody = NULL,
cell_line = NULL,
treatment = NULL,
spike_in = NULL) {
# yield sample sheet that only matters to NF sample sheet and downstream
# analysis
# about parameter
# sheet (sheet's number of name, pass to readxl::read_xlsx(): default to first sheet
# if unique_id is given, then sample_id will be unique_id with
# cell_line, antibody, and treatment (if not NULL) appending to it
assertFILEDOESNTEXIST <- stopifnot(file.exists(master_sheet))
require(readxl)
require(readr)
ext <- tools::file_ext(master_sheet)
if (ext == 'xlsx')
df <- readxl::read_xlsx(master_sheet, sheet=sheet)
if (ext == 'csv')
df <- readr::read_csv(master_sheet)
# sanity check: if not NULL, check if it exist
column_names <- names(df)
assert <- all(c(sample_id, antibody, cell_line, treatment) %in% column_names)
}
?str_replace
library(stringr)
library(tidyr)
library(readr)
library(readxl)
library(dplyr)
?str_replace
master_sheet <- file.path('/Users/cwo11/Projects/makeNFSampleSheet/inst/extdata',
'JFSe8_Free_CnR_Template.xlsx')
sheet = 1
assertFILEDOESNTEXIST <- stopifnot(file.exists(master_sheet))
assertFILEDOESNTEXIST
ext <- tools::file_ext(master_sheet)
if (ext == 'xlsx')
df <- readxl::read_xlsx(master_sheet, sheet=sheet)
if (ext == 'csv')
df <- readr::read_csv(master_sheet)
head(df)
extra_columns <- c('Ab', 'Seq_name')
extra_columns <- c('Ab', 'Seq_name')
cell_line = 'Cell line'
antibody = 'Condition'
treatment = NULL
sample = NULL
spike_in = FALSE
sinle_end = FALSE
single_end = FALSE
assert <- all(c(sample_id, antibody, cell_line, treatment,
extra_columns) %in% column_names)
sample_id = NULL
extra_columns
all(c(unique_id, sample_id, antibody, cell_line, treatment,
extra_columns) %in% column_names)
unique_id = 'unique_id'
all(c(unique_id, sample_id, antibody, cell_line, treatment,
extra_columns) %in% column_names)
column_names <- names(df)
all(c(unique_id, sample_id, antibody, cell_line, treatment,
extra_columns) %in% column_names)
c(sample) %in% column_names
all(c(sample) %in% column_names)
